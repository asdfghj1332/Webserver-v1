{% extends "base.html" %}

{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}

<h1>Welcome to Trigger Camera!</h1>

<p>Click the link below to start listening!</p>

<button type="submit" id="script-button">
    Start Listening
</button>

<script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<script>
    function runScript() {
        var request = new XMLHttpRequest();
        request.onreadystatechange = function() {
            if (request.readyState === 4) {
                if (request.status === 200) {
                    alert('Ran the script, result was ' + request.responseText);
                } else {
                    alert('Something went wrong, status was ' + request.status);
                }
            }
        };
        request.open('POST', 'trigger_camera.py', true);
        request.send(null);
        return false;  // Prevent the default button action
    };
    
    document.getElementById('script-button').onclick = runScript;
    </script>

{% endblock %}